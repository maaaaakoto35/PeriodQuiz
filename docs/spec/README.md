# 開発ドキュメント

## 仕様策定の進め方

###### システム要件（詳細）

### ピリオドについて
- ピリオドは10-20問程度のクイズをまとめた単位
- adminが任意に設定・管理
- ピリオドの切り替えはadminが手動で実行
- userは自動で次のクイズ・次のピリオドに遷移
- 複数ピリオドの同時進行は不可

### クイズについて
- 形式: 選択式（選択肢は2-4個）
- 出題: リアルタイムで全員に同時出題
- 1ピリオドあたりのクイズ数: 可変
- 制限時間: なし（adminが次画面に遷移した時点で締切）
- 回答変更: 不可
- 未回答: 不正解扱い
- **問題と選択肢の表示**:
  - 画像（任意）+ 文字列（必須）
  - 画像がない場合もあるが、文字列は必ず存在するセクション）ごとにクイズのチャンピオンが決まるシステムです。

### 登場人物
- **admin（管理者）**
  - クイズの作成
  - userの画面遷移操作
  - 集計結果の表示

- **user（ユーザー）**
  - クイズの回答
  - 集計結果の表示

### 仕様ドキュメントの作成ルール
1. `docs/spec/` ディレクトリ配下にユーザーストーリー形式で仕様を記述
2. ファイル名とタイトルは重要かつ優先度の高い順に `001-仕様名.md` の形式を使用
3. 各仕様ファイルはユーザーストーリー形式で記述

### 仕様策定プロセス
1. システムの詳細な要件をヒアリング
2. 必要な機能を洗い出し
3. 優先度順に仕様ファイルを作成
4. 各仕様についてレビュー・調整

## システム要件（詳細）

### ピリオドについて
- ピリオドは10-20問程度のクイズをまとめた単位
- adminが任意に設定・管理
- ピリオドの切り替えはadminが手動で実行
- userは自動で次のクイズ・次のピリオドに遷移
- 複数ピリオドの同時進行は不可

### クイズについて
- 形式: 選択式（選択肢は2-4個）
- 出題: リアルタイムで全員に同時出題
- 1ピリオドあたりのクイズ数: 可変
- 制限時間: なし（adminが次画面に遷移した時点で締切）
- 回答変更: 不可
- 未回答: 不正解扱い

### 集計・ランキング
- **ピリオドごとのランキング**
  - ソート順: `正解数（降順） > 回答までの総時間（昇順）`
  - 回答時間: 各クイズの問題表示から回答ボタンを押すまでの時間の合計
  - **未回答問題の時間**: admin側でクイズ表示からクイズ締め切りまでの時間を使用
  - チャンピオン: ランキング1位のuser
  - **同順位**: 正解数も回答時間も同じ場合は同立順位とする
  
- **最終結果（全ピリオド横断）**
  - ソート順: `正解数（降順） > 全クイズの回答までの総時間（昇順）`
  - 優勝者: 最終ランキング1位のuser
  - **同順位**: 正解数も回答時間も同じ場合は同立順位とする

### ユーザー管理
- ログイン: 不要
- 識別方法: セッションベース
- ニックネーム: 入力可能（集計結果表示用）
  - **重複不可**: 同じニックネームは許容しない
  - セッションが保たれていれば途中でリロードしても復活可能
  - **クイズ途中からの新規登録は不可**
- 想定ユーザー数: 120人程度（同時アクセス）

### 画面遷移フロー
1. 待機画面
2. クイズ問題表示（回答受付画面を兼ねる）
3. 正解発表画面
4. 2-3をピリオド終了まで繰り返す
5. ピリオド終了画面
6. ピリオド集計結果画面
7. ピリオドがまだある場合は1に戻る
8. 最終結果待機画面（全ピリオド終了時）
9. 最終結果画面

### 集計結果の表示
- **admin**: リアルタイムで集計結果を確認可能
- **user**: 画面遷移フローに従って表示（ピリオド集計結果画面、最終結果画面）

### UI/UX要件
- **user画面**: 主にスマートフォン前提
  - PCで開いた場合は左右のmarginで対応
- **admin画面**: 主にPC前提
  - スマートフォンはレスポンシブ対応程度

### エラーハンドリング
- セッションが保たれていれば途中でリロードしても復活可能
- クイズ途中からの新規ユーザー登録は不可
- その他のエラーケースは実装時に検討

## 現在のステータス
- 仕様策定フェーズ: 仕様書作成中
- 作成日: 2025年10月19日
- 要件確定日: 2025年10月19日
