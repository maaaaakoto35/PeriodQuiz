# 006 - システムの初期化とリセット

## 概要
新しいクイズイベントを開始するためのシステム初期化と、イベント終了後のリセット機能。

## ユーザーストーリー

### US-006-01: 新規イベントの開始
**As an** admin  
**I want to** 新しいクイズイベントを開始する  
**So that** 新しいクイズ大会を実施できる

#### 受け入れ基準
- [ ] admin画面から「新規イベント開始」ボタンをクリックできる
- [ ] 事前に作成したイベントを選択して開始できる
- [ ] イベント開始時に以下が初期化される:
  - 参加者リスト（セッションのクリア）
  - 回答データ（過去のイベントと混在しないように）
  - ランキングデータ
- [ ] イベント開始後、ユーザーは参加可能になる（ニックネーム入力画面）

#### 技術的考慮事項
- イベントIDによるデータの分離
- 過去イベントデータの保持（履歴として）

---

### US-006-02: イベントの一時停止と再開
**As an** admin  
**I want to** 進行中のイベントを一時停止し、後で再開する  
**So that** 予期せぬトラブル時に対応できる

#### 受け入れ基準
- [ ] admin画面から「イベント一時停止」ボタンをクリックできる
- [ ] 一時停止中は新規ユーザーの参加を受け付けない
- [ ] 一時停止中、ユーザーには「一時停止中」のメッセージが表示される
- [ ] admin画面から「イベント再開」ボタンで再開できる
- [ ] 再開時、ユーザーは停止時点の画面から継続できる

#### 技術的考慮事項
- イベント状態の管理（進行中/一時停止/終了）
- セッションの維持

---

### US-006-03: イベントの終了
**As an** admin  
**I want to** イベントを正式に終了する  
**So that** 次のイベントの準備ができる

#### 受け入れ基準
- [ ] admin画面から「イベント終了」ボタンをクリックできる
- [ ] 確認ダイアログが表示される（誤操作防止）
- [ ] イベント終了後、以下の処理が行われる:
  - イベントの状態を「終了」に変更
  - 最終集計結果を確定・保存
  - ユーザーセッションを無効化
- [ ] 終了後もadmin画面から結果を閲覧可能

#### 技術的考慮事項
- イベントデータのアーカイブ
- 終了後の再開不可制御

---

### US-006-04: 過去イベントの閲覧
**As an** admin  
**I want to** 過去に実施したイベントの結果を閲覧する  
**So that** 過去の記録を確認できる

#### 受け入れ基準
- [ ] admin画面に「過去のイベント一覧」が表示される
- [ ] イベントを選択して詳細を閲覧できる:
  - イベント名
  - 実施日時
  - 参加者数
  - 全体ランキング
  - 各ピリオドの結果
  - 各問題の正解率

#### 技術的考慮事項
- イベントデータの長期保存
- 効率的な履歴データの取得

---

### US-006-05: テストモード
**As an** admin  
**I want to** 本番前にテストモードでクイズを実施する  
**So that** 問題や設定に誤りがないか確認できる

#### 受け入れ基準
- [ ] admin画面から「テストモード開始」ボタンをクリックできる
- [ ] テストモードでは以下の制約がある:
  - データは保存されない（またはテストデータとして分離）
  - adminも回答者として参加できる
- [ ] テストモード終了後、データをクリアできる

#### 技術的考慮事項
- テストフラグによるデータ分離
- テストデータの自動削除

---

## 非機能要件
- **データ整合性**: イベント間のデータが混在しない
- **操作の安全性**: 重要な操作（終了、リセット）には確認ダイアログ

## 依存関係
- 002 クイズとピリオドの管理
- 003 画面遷移制御
- 005 集計とランキング表示

## 備考
- イベントのエクスポート機能（結果のCSV出力など）も将来的に検討
